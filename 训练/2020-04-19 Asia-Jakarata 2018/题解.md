# 2020-04-19 Asia-Jakarata 2018

## B. Rotating Gears
首先对于第一个问题：如何统计每个联通块的大小。先对每个点分配dfs序，把查询子树大小转化为区间和，初始时每个位置的权值应该为1。那么在拿走一个齿轮的同时，应该把拿走齿轮的位置减去 以拿走的齿轮为根的子树联通块大小，这样在上方查询的时候，计算区间和时就能得到所在联通块大小。在放回齿轮的时候需要注意权值要向上合并，放回的齿轮位置权值虽然变回了1，在更上方查询时依然要减掉这部分权值。对于第二个问题：每个齿轮的转动角度。奇数层与偶数层的转动角度只有乘-1的系数的差别，所以我们不妨把问题转化为所有联通块中的齿轮都同方向旋转。解决的方法与第一问是类似的，用一个标记表示整个子树转动的角度，然后再放回齿轮的时候重新处理上下方两个标记间的差值。

## C. Smart Thief
这是一个经典模型，可以把长为$N-1$的每个串作为点，长为$N$的串就是连接前缀和后缀的边，问题就变成了求欧拉回路，N,M较大时直接输出随机串即可。N,M较小时，直接动态开点找欧拉回路。

## F. Popping Balloons
简单贪心，让每个气球去打断所能打断的最长的时间即可。

## G. Go Make It Complete
从大到小枚举k，每次把所有可能在当前k能取出的边找到：先扫描剩余的所有边，如果大于等于当前k，加入队列，每次从队列中取出一个，让两端点度数+1，检查是否有新的边权值大于等于k。复杂度$O(n^3)$。

## H. Lexical Sign Sequence
简单题。从左到右尝试每一位填-1，后面都是1是否可行。扫描线维护有标记的堆。

## J. Future Generation
可能的子序列非常少，暴力找出所有子序列排序，直接dp即可。

## K. Boome rangs
可以转化一下问题，每条边可以使自己的一个端点的权值+1，最后要使尽量多的端点变成偶数，不难发现对于两个权值为奇数的点，如果连通就可以找到一条增广路使他们都变成偶数。那么我们不妨每次删除一个点，且使这个点被删除时权值是偶数而且不影响连通性。那么对于每一个连通块随意选一个点作为根，bfs分层，从下往上删点，就不会影响连通性。或者直接找到生成树，对于非树边随意处理，用树边来凑奇偶性。